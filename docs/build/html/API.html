
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API &#8212; Car-Speed-Detection 1.7.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data and Links" href="Data.html" />
    <link rel="prev" title="About" href="about.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-car_speed.car_speed_detection">
<span id="api"></span><h1>API<a class="headerlink" href="#module-car_speed.car_speed_detection" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="car_speed.car_speed_detection.check_images_match">
<code class="sig-prename descclassname">car_speed.car_speed_detection.</code><code class="sig-name descname">check_images_match</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">read_dir</span></em>, <em class="sig-param"><span class="n">image_count</span></em><span class="sig-paren">)</span><a class="headerlink" href="#car_speed.car_speed_detection.check_images_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the images in the directory ‘read_dir’ match the image count ‘image_count’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>read_path</strong> (<em>str</em>) – Path to the directory that stored the images.</p></li>
<li><p><strong>image_count</strong> (<em>int</em>) – Image count users expected.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if matches, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="car_speed.car_speed_detection.combine_video_and_speed">
<code class="sig-prename descclassname">car_speed.car_speed_detection.</code><code class="sig-name descname">combine_video_and_speed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">video_path</span></em>, <em class="sig-param"><span class="n">speed_path</span></em>, <em class="sig-param"><span class="n">output_path</span><span class="o">=</span><span class="default_value">'combined_video_and_speed.mp4'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#car_speed.car_speed_detection.combine_video_and_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in the speed of the car from ‘speed_path’, print the corresponding spped on each frame in the video at ‘video_path’, and output the video at ‘output_path’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>video_path</strong> (<em>str</em>) – Path to the video.</p></li>
<li><p><strong>speed_path</strong> (<em>str</em>) – Path to the speed text.</p></li>
<li><p><strong>output_path</strong> (<em>str</em>) – Path to the output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if combining success, False if combining fail.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="car_speed.car_speed_detection.preprocess">
<code class="sig-prename descclassname">car_speed.car_speed_detection.</code><code class="sig-name descname">preprocess</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">read_dir</span></em>, <em class="sig-param"><span class="n">train_path</span></em>, <em class="sig-param"><span class="n">output_path</span></em>, <em class="sig-param"><span class="n">resize</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">x_slice</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">y_slice</span><span class="o">=</span><span class="default_value">6</span></em><span class="sig-paren">)</span><a class="headerlink" href="#car_speed.car_speed_detection.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocess all the images stored in directory ‘read_dir’ and attach each frame with the corresponding speed stored at ‘train_path’ and output the feature set to a txt file at ‘output_path’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>read_dir</strong> (<em>str</em>) – Path to the directory that stored the images.</p></li>
<li><p><strong>train_path</strong> (<em>str</em>) – Path to the file that store the speed of each frame in the video.</p></li>
<li><p><strong>output_path</strong> (<em>str</em>) – Path to the output file that stored the feature set.</p></li>
<li><p><strong>resize</strong> (<em>int</em>) – Ratio factor along horizontal and vertical axis.</p></li>
<li><p><strong>x_slice</strong> (<em>int</em>) – Desired slice along horizontal axis.</p></li>
<li><p><strong>y_slice</strong> (<em>int</em>) – Desired slice along vertical axis.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time it takes to preprocess the images.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="car_speed.car_speed_detection.read">
<code class="sig-prename descclassname">car_speed.car_speed_detection.</code><code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">read_path</span></em>, <em class="sig-param"><span class="n">write_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#car_speed.car_speed_detection.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a mp4 video from ‘read_path’ and stored each frame as a jpg file in a new directory ‘write_dir’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>read_path</strong> (<em>str</em>) – Path to the input video, should be a mp4 file.</p></li>
<li><p><strong>param</strong> (<em>str</em>) – Path to the output directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The index of the last frames being processed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="car_speed.car_speed_detection.speed_detection">
<code class="sig-prename descclassname">car_speed.car_speed_detection.</code><code class="sig-name descname">speed_detection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model_path</span></em>, <em class="sig-param"><span class="n">video</span></em>, <em class="sig-param"><span class="n">output_path</span></em>, <em class="sig-param"><span class="n">required_resize</span></em>, <em class="sig-param"><span class="n">required_x_slice</span></em>, <em class="sig-param"><span class="n">required_y_slice</span></em>, <em class="sig-param"><span class="n">MEAN_CONST</span></em>, <em class="sig-param"><span class="n">STD_CONST</span></em><span class="sig-paren">)</span><a class="headerlink" href="#car_speed.car_speed_detection.speed_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect the speed of the automobile using the pretrained model from ‘model_path’ and input video from ‘video’, and then output the txt file of the detected speed at ‘output_path’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_path</strong> (<em>str</em>) – Path to the pretrained model.</p></li>
<li><p><strong>video</strong> (<em>str</em>) – Path to the video.</p></li>
<li><p><strong>output_path</strong> (<em>str</em>) – Path to the output.</p></li>
<li><p><strong>required_resize</strong> (<em>int</em>) – Resize scale that was used for the pretrained model.</p></li>
<li><p><strong>required_x_slice</strong> – x slice that was used for the pretrained model.</p></li>
<li><p><strong>required_y_slice</strong> – y slice that was used for the pretrained model.</p></li>
<li><p><strong>MEAN_CONST</strong> – Mean of the training set, used to normalize the testing set.</p></li>
<li><p><strong>STD_CONST</strong> – Standard Deviation of the training set, used to normalize the testing set.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>tuple containing:</dt><dd><p>(index (int): index of the last frame that is predicted, detection_time (float): Total time took to predict the speed of the car from the input video).</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="car_speed.car_speed_detection.train">
<code class="sig-prename descclassname">car_speed.car_speed_detection.</code><code class="sig-name descname">train</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">read_path</span></em>, <em class="sig-param"><span class="n">validation_split</span><span class="o">=</span><span class="default_value">0.75</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">128</span></em>, <em class="sig-param"><span class="n">epoch</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#car_speed.car_speed_detection.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train the Artifitial Neural Network (ANN) model with the preprocessed feature set stored in ‘read_path’ and stored the model as ‘Model.h5’ in the root directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>read_path</strong> (<em>str</em>) – Path to the file that stores the feature set.</p></li>
<li><p><strong>validation_split</strong> (<em>float</em>) – Float between 0 and 1. Fraction of the training data to be used as validation data. The model will set apart this fraction of the training data, will not train on it, and will evaluate the loss and any model metrics on this data at the end of each epoch.</p></li>
<li><p><strong>batch_size</strong> (<em>str</em>) – Integer or None. Number of samples per gradient update.</p></li>
<li><p><strong>epoch</strong> (<em>int</em>) – Integer. Number of epochs to train the model. An epoch is an iteration over the entire x and y data provided. Note that in conjunction with initial_epoch, epochs is to be understood as “final epoch”. The model is not trained for a number of iterations given by epochs, but merely until the epoch of index epochs is reached.</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – 0, 1, or 2. Verbosity mode. 0 = silent, 1 = progress bar, 2 = one line per epoch. Note that the progress bar is not particularly useful when logged to a file, so verbose=2 is recommended when not running interactively.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>tuple containing:</dt><dd><p>(mse (float): mean square error of the model that is tested with validation data, MEAN_CONST (float): mean value that is used to normalize the feature set, STD_CONST (float): standard deviation value that is used to normalize the feature set).</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Car-Speed-Detection</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="Data.html">Data and Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="Example%20Code.html">Example Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="QandA.html">Q&amp;A</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="about.html" title="previous chapter">About</a></li>
      <li>Next: <a href="Data.html" title="next chapter">Data and Links</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Shao-Chieh Lien.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/API.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>